{{define "content"}}
<h1>Cars Page</h1>
<p>This is a page to display cars. You can also add, update, and delete cars.</p>

<form action="/cars" method="post" enctype="multipart/form-data">
    <input type="hidden" name="user_id" id="user_id" value="{{ .UserID }}">
    <label for="model">Model:</label>
    <input type="text" id="model" name="model" required>
    <label for="year">Year:</label>
    <input type="number" id="year" name="year" required>
    <label for="cost">Cost:</label>
    <input type="number" id="cost" name="cost" step="0.01" required>
    <label for="description">Description:</label>
    <input type="text" id="description" name="description">
    <label for="image">Image:</label>
    <input type="text" id="image" name="image">
    <label for="brand">Brand:</label>
    <input type="text" id="brand" name="brand" required>
    <button type="submit">Add Car</button>
</form>

{{range .Cars}}
<div class="car-container" data-car-id="{{.ID}}">
    <h2>{{.Brand}} {{.Model_Car}}</h2>
    <p>Year: {{.Year}}, Cost: ${{.Cost}}</p>
    <p>Description: {{.Description}}</p>

    <!-- Используем ID пользователя и ID машины в форме -->
    <form action="/wishlist/{{ $.UserID.Hex }}/add/{{.ID.Hex}}" method="post">
        <button type="submit">Add to Wishlist</button>
    </form>


    <a href="/cars/{{.ID.Hex}}/edit">Edit</a>
    <form id="deleteForm" action="/cars/{{.ID.Hex}}/delete" method="post">
        <button type="button" onclick="deleteCar('{{.ID.Hex}}')">Delete</button>
    </form>
    <hr>

</div>
<!--<script>var carID = document.querySelector('.car-container').getAttribute('data-car-id');-->
<!--</script>-->
<script>
    function deleteCar(carID) {
        var confirmation = confirm("Are you sure you want to delete this car?");
        if (confirmation) {
            var form = document.getElementById("deleteForm");
            form.action = "/cars/" + carID + "/delete";
            form.submit();
        }
    }
</script>

{{end}}

{{end}}
